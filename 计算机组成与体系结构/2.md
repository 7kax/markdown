# Chapter 2 Class 1 数值数据的表示

## 定点数的表示

### 原码

原码=符号位+数值的绝对值

缺点：

- 0 的表示不唯一，故不利于程序员编程
- 加、减运算方式不统一
- 需额外对符号位进行处理，故不利于硬件设计
- 特别当$a<b$时，实现$a-b$比较困难

### 补码

在一个**模运算系统**中，一个数与它除以“模”后的余数等价

补码与真值之间的简便转换：**_各位取反，末位加 1_**

变形（模 4）补码：**双符号**，用于存放可溢出的中间结果

### 移码

将每一个数值加上一个偏置常数（Excess/bias）

一般来说，当编码位数为$n$时，bias 取$2^{n-1}$

### 定点整数的表示

- 无符号整数：没有符号位
- 带符号整数：补码

区别：

- 扩充操作
- 数的比较
- 溢出判断

## 浮点数

格式：$(-1)^S \times 1.M \times 2^E$

其中：

- $S$：符号位
- $M$：尾数，定点小数，原码表示
- $E$：阶码，移码表示（偏执常数 128）

表示范围：最大正数：$0.11…1 \times 2^{11…1} = (1-2^{-24}) \times 2^{127}$，最小正数：$0.10…0 \times 2^{00…0} =(1/2) \times 2^{-128}$，正负对称

### IEEE754 浮点数标准

- Sign bit(1): 1 表示**negative**; 0 表示**positive**
- Exponent(8/16):
  - 阶码范围为 0000 0001 (-126) ~ 1111 1110 (127)
  - bias 为 127/1023
- Significand（尾数）:
  - 规格化尾数最高位总是 1，所以隐含表示，省 1 位
  - 1 + 23 bits(single)，1 + 52 bits(double)

### 非规格化数

- $E$和$M$全为$0$：表示$\pm 0$
- $E$为$0$，$M$非$0$：**非规格化数**
  - 尾数隐含的 1 会显现
- $E$全为$1$，$M$全为$0$：表示$\pm \infin$
- $E$全为$1$，$M$非$0$：表示$NaN$

## 十进制数表示

ASCII 码/BCD 码

# Chapter 2 Class 2 非数值数据表示及数据的宽度、存储排列、纠/检错

## 非数值数据的表示

### 逻辑数据

真：1 / 假：0

### 西文字符

7 位 ASCII 码

- **十进制数字**：0/1/2…/9
- **英文字母**：A/B/…/Z/a/b/…/z
- **专用符号**：+/-/%/\*/&/……
- **控制字符**（不可打印或显示）

### 汉字及国际字符

有以下几种汉字代码

- 输入码：对汉字用相应按键进行编码表示，用于输入
- **内码**：用于在系统中进行存储、查找、传送等处理
- 字模点阵或轮廓描述: 描述汉字字模点阵或轮廓，用于显示/打印

#### 国标码（国标交换码）

GB2312-80 字符集由三部分组成

- 字母、数字和各种符号，包括英文、俄文、日文平假名与片假名、罗马字母、汉语拼音等共 687 个
- 一级常用汉字，共 3755 个，按汉语拼音排列
- 二级常用汉字，共 3008 个，不太常用，按偏旁部首排列

汉字的区位码：码表由 94 行、94 列组成，**行号为区号，列号为位号**，各占 7 位，指出汉字在码表中的位置，共 14 位，**区号在左、位号在右**

汉字的国标码：每个汉字的区号和位号**各自加上 32（20H）**，得到其“国标码”，国标码中区号和位号各占 7 位。

汉字内码：为与 ASCII 码区别，将国标码的两个字节的第一位置“1”后得到一种汉字内码

#### 国际字符集

一种涵盖全部字符的多字符集

## 数据的宽度

位（bit）、字节（byte）、字（word）

- 字长：定点运算数据通路的宽度
- 字：被处理信息的单位

## 数据的存储排列

MSB/LSB：最高/低有效位（字节）

- 大端法：MSB 放在低地址
- 小端法：MSB 放在高地址

数据对齐

- 大于等于**_4_**个字节的数据，按 **_4_** 字节对齐
- **_2_**个字节的数据，按 **_2_** 字节对齐
- **_1_**个字节的数据，无要求

## 数据的纠错和检错

码距：一种码制有若干合法字，合法字之间有 **_d_** 位不同，**_d_** 的最小值称为 **_码距_**

### 奇偶校验码

- 增加一位奇（偶）校验位并一起存储或传送，终部件求出新校验位，根据新校验位确定是否发生了错误
- 保持每个字中 1 的个数为奇/偶数
- 码距为 2

### CRC 检错码

设多项式$M(x)$表示一个$n$位的二进制数据

- $M(x)$左移$k$位, 得到$M(x)\cdot x^{k}$
- 计算$\cfrac{M(x)\cdot x^{k}}{G(x)}$（模 2 减法）, $G(x)$是一个$k+1$位的二进制数,称为 **_生成多项式_**
- 得到$k$位余数就是校验码
- 校验位拼接到$M(x)$后，形成一个$n+k$位的码
- 称该代码为循环冗余校验(CRC)码

校验方法:CRC 码一定能被 **_生成多项式_** 整除
